/* globals global */
jQuery(function($){

	// https://jqueryui.com/autocomplete/#custom-data
	var searchRequest;
	$('.search-autocomplete').autoComplete({
		minChars: 2,
		source: function(term, suggest){
			try { searchRequest.abort(); } catch(e){}
			searchRequest = $.get( global.search_api, { term: term }, function( res ) {
				if ( res !== null ) {
					console.log("result search", res);
					var results = [];
					for(var key in res) {
						results.push(res[key].post_title)
					}

					suggest(results);
				}
			});
		},
		onSelect: function(e, term, item){
			console.log("onselect", term, item);

			// alert(<b>'Item "'</b>+item.data(<b>'langname'</b>)+<b>' ('</b>+item.data(<b>'lang'</b>)+<b>')" selected by '</b>+(e.type == <b>'keydown'</b> ? <b>'pressing enter'</b> : <b>'mouse click'</b>)+<b>'.'</b>);
		}
	});

	$( ".search-autocomplete" ).on( "autocompleteselect", function( event, ui ) {
		console.log("Selected: ", ui.item);
	} );
});